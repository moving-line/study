# 아이템2 : 생성자에 매개변수가 많다면 빌더를 고려하라

정적팩터리메서드, 생성자의 공통적인 제약 -> 선택적 매개변수가 많을 때 곤란해진다

이럴 때 점층적 생성자 패턴을 즐겨 사용했었다

-> 원하지 않는 매개변수를 포함해도 어쩔 수 없이 썼다

점층적 생성자 패턴도 쓸 수는 있지만, 매개변수가 많아지면 클라이언트 코드를 작성하거나 읽기 어렵다

대안
1. 점층적 생성자 패턴
2. 자바빈즈 패턴

자바빈즈 -> 매개변수가 없는 생성자로 객체 만들고, 세터로 원하는 매개변수의 값 설정

점층적생성자 단점 보완했지만, 얘는 얘대로 심각한 단점
객체하나 만들려고 여러 메서드 호출해야되고,
객체가 온전히 완성되기 전까지는 일관성이 무너진 상태에 방치
이 문제 때문에 클래스를 불변으로 만들수없고
스레드 안정성을 얻으려면 추가 작업이 필요하다

이런 단점을 완화하려고 생성이끝난객체를 얼려두고 완성되면 녹여서 쓰는데
실전에서 거의 안쓰임

3. 빌더 패턴
필수 매개변수만으로 생성자 혹은 팩터리메서드로 객체생성,
빌더객체가 제공하는 일종의 세터메서드로 선택 매개변수 설정
마지막에 build 메서드 호출로 우리에게 필요한(보통은 **불변**인) 객체를 얻는다

체이닝 방식으로 호출이 가능한 애들을 `플루언트 API` 혹은 `메서드 체이닝`이라고 한단다~
빌더패턴은 파이썬, 스칼라에 있는 명명된 선택적 매개변수(named optional parameters)를 흉내낸거래


공변반환타입
https://www.geeksforgeeks.org/covariant-return-types-java/
https://stackoverflow.com/questions/1882584/what-is-a-covariant-return-type

covariant return type

오버라이딩 메소드에서 하위타입 반환가능 1.5부터


제네릭 ? 는 와일드카드
와일드 카드 ? 는 제한된 형식의 매개변수 범위를 지정된 자료형의 서브클래스까지 확장시켜주는 기능입니다.

 - 제네릭 타입<?>: Unbounded Wildcards(제한 없음)

  타입 파라미터를 대치하는 구체적인 타입으로 모든 클래스나 인터페이스 타입이 올 수 있습니다.

 - 제네릭 타입<? extends 상위 타입>: Upper Bounded Wildcards(상위 클래스 제한)

  타입 파라미터를 대치하는 구체적인 타입으로 상위 타입이나 하위 타입이 올 수 있습니다.


 - 제네릭 타입<? Super 하위 타입>: Lower Bounded Wildcards(하위 클래스 제한)

  타입 파라미터를 대치하는 구체적인 타입으로 하위 타입이나 상위타입이 올 수 있습니다.

출처: https://palpit.tistory.com/668 [palpit Vlog]



무튼 빌더패턴 짱짱이지만, 단점도 존재한다

객체를 만들려면 일단 빌더부터 만들어야된다.
빌더생성비용이 크지않지만 어쨌든 비용은 비용, 특정 상황에서 부적절할수있다

점층적 생성자 패턴보다는 코드가 장황해서 매개변수가 4,5 개 이상 될 때 값어치 있다고 판단
매개변수 중 다수가 필수가 아니거나, 여러개가 같은 `타입` 일때 좋다! 